{% include './loader.html' %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<!-- {% load static %} -->


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static '/css/main.css' %}">
    <title>main | dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script>
</head>

<body style="margin: 0; padding: 0; min-height: 100vh;  box-sizing: border-box; background-color: #ecf0f4;">
    <!-- for charts using chart.js cdn -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- main frame starts here -->
    <!-- sidebar starts here -->
    <div class="container-fluid sidebar col-2 vh-100 fixed-top flex-column"
        style="background-color: #304969; margin-left:0; border-right: 1px solid #ecf0f4; overflow-x: auto; ">
        <div class="container">
            <a class="navbar-brand px-3 text-center" href="#">
                <img src="{% static '/images/project-logo.png' %}" alt="" style="width:173px; height:43px;">
            </a>
        </div>
        <div class="py-4">
            <h6 class="text-bold text-center text-light"> <i class="bi bi-speedometer2 px-1"></i>REGULATOR DASHBOARD
            </h6>
        </div>
        <!-- accordion starts -->
        <!-- profile accordion starts -->
        <div class="accordion w-75 m-auto py-2" id="accordionExample">
            <!-- homebut starts -->
            <div>
                <div class="accordion-item py-2">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <i class="bi bi-house px-3"></i> Home
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse " aria-labelledby="headingOne"
                        data-bs-parent="#accordionExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:regulator_dashboard' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">Home
                                            Page</button></a></li>
                            </ul>
                        </div>
                        <style>
                            ul.dash-drop {
                                list-style-type: none;
                                margin: 0;
                                padding: 0;
                                overflow: hidden;
                            }
                        </style>
                    </div>
                </div>
            </div>
            <!-- homebut ends -->
            <!-- patientbut starts -->
            <div class="py-3">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
                            <i class="bi bi-clipboard2-pulse px-3"></i> Hospitals
                        </button>
                    </h2>
                    <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo"
                        data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:regulatordash_hospitals' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">View
                                            Hospitals</button></a></li>
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:visualdata' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">Visualize
                                            Data</button></a></li>
                            </ul>
                        </div>
                        <style>
                            ul.dash-drop {
                                list-style-type: none;
                                margin: 0;
                                padding: 0;
                                overflow: hidden;
                            }
                        </style>
                    </div>
                </div>
            </div>
            <!-- patientbut ends -->
            <!-- doctorbut start -->
            <div class="py-3">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseThree" aria-expanded="false"
                            aria-controls="flush-collapseThree">
                            <i class="bi bi-clipboard2-pulse px-3"></i> Research
                        </button>
                    </h2>
                    <div id="flush-collapseThree" class="accordion-collapse collapse"
                        aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:regulatordash_published' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">Published
                                            Papers</button></a></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- doctorbut ends -->
            <!-- reportbut starts -->
            <div class="py-3">
                <div class="accordion-item py">
                    <h2 class="accordion-header" id="flush-headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseFour" aria-expanded="false"
                            aria-controls="flush-collapseFour">
                            <i class="bi bi-clipboard2-pulse px-3"></i> Reports
                        </button>
                    </h2>
                    <div id="flush-collapseFour" class="accordion-collapse collapse" aria-labelledby="flush-headingFour"
                        data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:regulatordash_reports' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">Generate
                                            Report</button></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- reportbut ends -->
            <!-- profilebut starst -->
            <div class="py-3">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseFive" aria-expanded="false"
                            aria-controls="flush-collapseFive">
                            <i class="bi bi-person px-3"></i> Profile
                        </button>
                    </h2>
                    <div id="flush-collapseFive" class="accordion-collapse collapse" aria-labelledby="flush-headingFive"
                        data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; "
                                        href="{% url 'regs:regulatordashprofile' %}"><button type="button"
                                            class="w-100 btn btn-secondary" style="opacity: 0.7;">View
                                            Profile</button></a></li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- profilebut ends -->
            <!-- settingsbut start -->
            <div class="py-3">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingSix">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                            data-bs-target="#flush-collapseSix" aria-expanded="false" aria-controls="flush-collapseSix">
                            <i class="bi bi-gear px-3"></i> Settings
                        </button>
                    </h2>
                    <div id="flush-collapseSix" class="accordion-collapse collapse" aria-labelledby="flush-headingSix"
                        data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">
                            <ul class="dash-drop w-100 container-fluid">
                                <li class=" py-1"><a class="link-dash " style="text-decoration: none; " href="#"><button
                                            type="button" class="w-100 btn btn-secondary" style="opacity: 0.7;">Contact
                                            Help ?</button></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- settingbut ends -->

        <!-- accordion ends -->

    </div>
    <!-- sidebar ends here -->
    <!-- contentbar starts here -->
    <!-- nav bar starts here -->
    <div class="position-relative " style="background-color:#304969 ; height:5vh;">
        <div class=" position-absolute py-2 " style="left:21.5vw;">
            <p class="text-light"> <i class="bi bi-person px-1"></i> {{request.session.username}} </p>
        </div>
        <div class="position-absolute" style="right:4.5vw">
            <div class="dropdown py-1">
                <a class="btn btn-secondary bg-light text-dark dropdown-toggle" href="#" role="button"
                    id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    Log Out
                </a>
                <div class="dropdown-menu position-absolute" aria-labelledby="logout dropdown">
                    <div>
                        <a class="nav-link fs- text-bold" href="{% url 'accounts:logout' %}"
                            style="text-decoration: none; color:rgb(219, 45, 45)"><i class="bi bi-box-arrow-right"></i>
                            &nbsp; Log Out </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- nav bar ends here -->

    <!-- main content starts here -->

    <div class="py-5" style="margin-left:17vw" style="overflow-x: auto;">
        <!--statistical data section  -->
        <div class="container px-4">
            <!-- row 1 of statistics -->
            <div class="row gx-5 py-3">
                <div class="col">
                    <div class="p-3 border bg-light shadow  text-secondary " style="border-radius: 15px;">
                        <h3>Hospitals Registered {{ hospital_count }} </h3>
                    </div>
                </div>
                <div class="col">
                    <div class="p-3 border bg-light text-secondary shadow" style="border-radius: 15px;">
                        <h3>Researches published {{ publication_count }}</h3>
                    </div>
                </div>
                <div class="col">
                    <div class="p-3 border bg-light text-secondary shadow" style="border-radius: 15px;">
                        <h3>Patients Registered {{ patient_count }}</h3>
                    </div>
                </div>
            </div>
            <!-- row 2 of statistics -->
            <div class="row gx-5 py-3">
                <!-- hid hospitals -->
                <!-- <div class="col">
                    <div class="p-3 border bg-light text-dark shadow" style="border-radius: 15px;">
                        <h3>Doctors Registered 43 </h3>
                    </div>
                </div> -->
                <div class="col">
                    <div class="p-3 border bg-light text-secondary shadow" style="border-radius: 15px;">
                        <h3>Cited Publications 00 </h3>
                    </div>
                </div>
                <div class="col">
                    <div class="p-3 border bg-light text-secondary shadow" style="border-radius: 15px;">
                        <h3>Data Requests {{ data_request_count }}</h3>
                    </div>
                </div>
            </div>
        </div>


        {% block regulatorlayout %}
        <!-- data requests section starts here -->
        <!-- table for data requests -->
        <div class="container py-5 col px-4">
            <div class=" row  w-100 ">
                <form class="row row-cols-lg-auto  ">
                    <div class="col-7">
                        <label class="visually-hidden" for="search">Search</label>
                        <div class="input-group">
                            <div class="input-group-text">Search</div>
                            <input type="search" class="form-control col-12" id="search_data_requests"
                                placeholder="search data request">
                        </div>
                    </div>
                </form>
            </div>
            <div class="row px-3">
                <table class="table table-responsive table-lg table-bordered bg-light caption-top " aria-label="some"
                    style="border-radius: 15px;" style="width:85vw;">
                    <caption>Data Requests</caption>
                    <thead class="table-primary">
                        <tr>
                            <th scope="col"># (S/NO)</th>
                            <th scope="col">Data Request Title</th>
                            <th scope="col">Description</th>
                            <th scope="col">Date Request</th>
                            <th scope="col">Request Permit</th>
                            <th scope="col">Request Status</th>

                        </tr>
                    </thead>
                    <tbody>
                        <!-- tests -->
                        {% for data_request in data_requests %}
                        <tr>
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{data_request.title}}</td>
                            <td>{{data_request.short_description}}</td>
                            <td>{{data_request.request_date}}</td>
                            <td> <a href="{{data_request.research_permit}}"><button type="button" class="btn btn-success"> Download
                            </button></a></td>
                            <td>
                                <form action="" method="get">
                                    <select name="" id="approval-select" class="form-select text-center"
                                        style="color:white; background-color: gray;">
                                        <option value="pending" default style="color:white; background-color: gray;">
                                            Pending</option>
                                        <option value="approved" style="background-color:green; color:white;">Approved
                                        </option>
                                        <option value="rejected" style="background-color:red; color:white;">Rejected
                                        </option>
                                    </select>
                                </form>

                                <script>
                                    const selectElement = document.getElementById("approval-select");
                                    selectElement.addEventListener("change", function () {
                                        const selectedOption = this.options[this.selectedIndex];
                                        selectElement.style.backgroundColor = selectedOption.style
                                            .backgroundColor;
                                        selectElement.style.color = selectedOption.style.color;
                                    });
                                </script>
                            </td>
                        </tr>
                        {% endfor %}
                        <!-- end -->
                        <!-- <tr>
                            <th scope="row">1</th>
                            <td>Mothers with protenuria</td>
                            <td>Effects of protenuria in preclampsisa.</td>
                            <td>21//05/2023</td>
                            <td>
                                <form action="" method="get">
                                    <select name="" id="approval-select" class="form-select text-center"
                                        style="color:white; background-color: gray;">
                                        <option value="pending" default style="color:white; background-color: gray;">
                                            Pending</option>
                                        <option value="approved" style="background-color:green; color:white;">Approved
                                        </option>
                                        <option value="rejected" style="background-color:red; color:white;">Rejected
                                        </option>
                                    </select>
                                </form>

                                <script>
                                    const selectElement = document.getElementById("approval-select");
                                    selectElement.addEventListener("change", function () {
                                        const selectedOption = this.options[this.selectedIndex];
                                        selectElement.style.backgroundColor = selectedOption.style
                                            .backgroundColor;
                                        selectElement.style.color = selectedOption.style.color;
                                    });
                                </script>
                            </td>
                        </tr> -->
                       
                    </tbody>
                </table>
            </div>


        </div>
        <!-- data request section ends  here  -->
        <!-- table for recent publications -->
        <div class="container py-5 px-4">
            <div class=" row  w-100 ">
                <form class="row row-cols-lg-auto  ">
                    <div class="col-7">
                        <label class="visually-hidden" for="search">Search</label>
                        <div class="input-group">
                            <div class="input-group-text">Search</div>
                            <input type="search" class="form-control col-12" id="search_publications"
                                placeholder="search publications">
                        </div>
                    </div>
                </form>
            </div>
            <table class="table table-responsive table-lg table-bordered bg-light caption-top " aria-label="some"
                style="border-radius: 15px;" style="width:85vw;">
                <caption>Publications</caption>
                <thead class="table-primary">
                    <tr>
                        <th scope="col"># (S/NO)</th>
                        <th scope="col">  Author </th>
                        <th scope="col"> Publication Title</th>
                        <th scope="col">Medical field</th>
                        <th scope="col">Date Published</th>
                        <th scope="col">Download Article</th>

                    </tr>
                </thead>
                <tbody>
                    {% for publication in publications %}
                    <tr>
                        <th scope="row">{{forloop.counter}}</th>
                        <td>{{publication.authors}}</td>
                        <td>{{publication.title}}</td>
                        <td>{{publication.medical_field}}</td>
                        <td>{{publication.publication_date}}</td>
                        <td><a href="{{publication.article_file}}"><button type="button" class="btn btn-success"> Download
                            </button></a></td>
                    </tr>
                    {% endfor %}
                    <!-- <tr>
                        <th scope="row">2</th>
                        <td>Birth defects in malnutritioned mothers</td>
                        <td>Jacob Malimali</td>
                        <td>21/05/2023</td>
                    </tr>
                    <tr>
                        <th scope="row">3</th>
                        <td>Impact of late Oedema Diagnosis</td>
                        <td>Thornton Asikuji</td>
                        <td>21/05/2023</td>
                    </tr> -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- nav tabs start here-->
    <!-- nav -tabs end here-->
    {% endblock %}
    <!-- main content ends here -->

    <!-- contentbar ends here -->
    <!-- main frame ends here -->
    <!-- java script links -->

    <!-- for tabs -->



    <!-- for bootstrap -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
    </script> -->


</body>

</html>